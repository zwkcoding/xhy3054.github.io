I"v<p>单目相机无法恢复真实尺度，使得双目相机成为了很多开发者的选择。</p>

<h1 id="双目相机模型">双目相机模型</h1>

<p>双目恢复深度进行三维重建的原理与人眼类似，为了进一步分析双目测距的原理，可以从下图深入理解双目相机模型：</p>

<div style="text-align: center">
<img src="/assets/img/stereo/stereo.PNG" width="750" height="450" />
</div>

<p>双目相机一般由左眼和右眼两个<strong>水平放置</strong>的相机组成。上图中左右两个相机都是使用针孔相机模型，两个相机的成像平面在同一个水平面上，同时两个相机光心是水平放置的，因此对于一个P点，其在两个图像上的投影点的行坐标是相同的，我们通过对其纵坐标的处理便可以得到视差了。</p>

<p>图中两个相机光心之间的距离b被成为双目相机的<strong>基线</strong>，是与焦距f一样重要的参数。</p>

<p>根据上图，假设一个空间点P，在左右目各成一像$P_L$与$P_R$，分别以两个光心垂直的位置为二维坐标原点，则$P_L$的横坐标为$u_L$，$P_R$的横坐标为$u_R$，可以发现$u_R$是一个负数。根据上图中右侧三角形相似的原理，可以得到下面公式</p>

<script type="math/tex; mode=display">\frac{z-f}{z}=\frac{b-u_{L}+u_{R}}{b}</script>

<p>经过整理，可以得到</p>

<script type="math/tex; mode=display">z = \frac{fb}{d}, d= u_L -u_R</script>

<p>此处d为投影点在左右图上的横坐标之差，也叫作<strong>视差</strong>，因此，根据视差我们就可以估计出这个空间点的深度了。</p>

<blockquote>
  <p>由于以上双目相机模型的特殊，我们不仅可以方便的估计深度，也可以在双目匹配时很容易的进行极线（横坐标一致的水平线）搜索匹配，大大减小匹配计算量。</p>
</blockquote>
:ET