<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>ros操作系统 - line - 千里之行</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#d25469">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#d25469">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#d25469">
	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
    <!--将该代码放入博客模板的head中即可-->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
        }
    });
    </script>
    <!--latex数学显示公式-->
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

  
<header class="main_header">
  <a href="/" class="logo">line</a>
  <nav class="main_menu">
    <a href="/about/">About</a>
    <a href="/contact/">Contact</a>
  </nav>
</header> <!-- End Section Header -->


<main class="post_content">
  <article class="post">
    <header>
      <div class="post_image">
        <img src=/assets/img/one-piece/one-piece4.jpg alt="ros操作系统">
      </div>
      <div class="post_description">
        <p class="post_meta">2019, May 25</p>
        <h1 class="post_title">ros操作系统</h1>
      </div>
    </header> <!-- End Header -->

    <div class="entry_content">
      <p>很长时间没有用ros了，刚好这几天手头有一台闲置的$turtlebot$，于是就想用它验证一些导航算法。重新看ros的官网教程，写的很好，但是每一节讲的东西很少，而我这里网速不快，每次打开新的网页都要等一会，超级费时间，所以写篇博客将ros的常用操作概括归纳一些，以后忘记了方便查阅。</p>

<h1 id="ros">ros</h1>
<p>ros是一种分布式机器人操作系统，依赖于$linux$（一般支持的linux系统有$ubuntu$系列与$debian$系列），由加州大学伯克利大学发布，目前，很多机器人的研究都是基于它。</p>

<h2 id="在ubuntu1604上安装ros">在Ubuntu16.04上安装ros</h2>
<p>$ros$有很多的版本，一般都是和$linux$系统的版本绑定的，在$Ubuntu16.04$上，我们可以安装的是$kinetic$版本。安装过程可以按照<a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">官网教程</a>进行，建议直接安装$desktop-full$版。</p>

<p>安装完毕记得照着教程初始化$rosdep$、设置环境、安装一些用于构建包的依赖。</p>

<h2 id="ros的环境管理">ros的环境管理</h2>
<p>在$ros$安装完毕后，我们会将<code class="highlighter-rouge">source /opt/ros/kinetic/etc/ros</code>写入到<code class="highlighter-rouge">~/.bashrc</code>中，这样每次打开终端，会自动设置$ros$相关的环境变量。</p>

<p>同时，通常除了系统的环境变量外，我们基于$ros$的开发通常会存在于一个工作空间中，在这个工作空间中我们也会新建一些包，此时我们也会需要导入这个工作空间的环境变量，使用<code class="highlighter-rouge">source ws/devel/setup.bash</code>。</p>

<h2 id="工作空间的管理">工作空间的管理</h2>
<ul>
  <li>创建一个名叫<code class="highlighter-rouge">catkin_ws</code>的工作空间
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/catkin_ws/src
<span class="nb">cd</span> ~/catkin_ws
catkin_make
<span class="nb">source</span> /devel/setup.bash
</code></pre></div>    </div>
    <hr />
  </li>
</ul>

<h2 id="包的创建与编译">包的创建与编译</h2>
<ul>
  <li>在工作空间中创建包<code class="highlighter-rouge">new_package</code>，依赖于包<code class="highlighter-rouge">depend_p1</code>与<code class="highlighter-rouge">depend_p2</code>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/catkin_ws/src
catkin_create_pkg new_package depend_p1 depend_p2 
</code></pre></div>    </div>
    <hr />
  </li>
  <li>
    <p>查看一个包的直接依赖<code class="highlighter-rouge">rospack depends1 new_packsge</code></p>
  </li>
  <li>
    <p>查看一个包的所有依赖（包括直接与间接）<code class="highlighter-rouge">rospack depends new_package</code></p>
  </li>
  <li>编译包，直接编译整个工作空间就可以了
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/catkin_ws
catkin_make
</code></pre></div>    </div>
    <hr />
  </li>
</ul>

<h2 id="ros文件系统相关命令">ros文件系统相关命令</h2>
<ul>
  <li>
    <p>查找ros包<code class="highlighter-rouge">roscpp</code>:<code class="highlighter-rouge">rospack find roscpp</code></p>
  </li>
  <li>
    <p>进入ros文件系统的某个目录下：<code class="highlighter-rouge">roscd 包名称/子目录</code></p>
  </li>
  <li>
    <p>查看ros包的保存路径：<code class="highlighter-rouge">echo $ROS_PACKAGE_PATH</code>，结果应该为ros系统目录下的包路径与你当前的工作空间的ros包路径，比如：<code class="highlighter-rouge">/home/xhy/catkin_ws/src:/opt/ros/kinetic/share</code></p>
  </li>
  <li>
    <p>罗列ros文件系统某个目录：<code class="highlighter-rouge">rosls 包名称/子目录</code></p>
  </li>
  <li>
    <p>ros命令行工具支持<code class="highlighter-rouge">tab</code>自动补全功能</p>
  </li>
  <li>
    <p>使用<code class="highlighter-rouge">rosed</code>快速编辑指定文件(默认编辑器是vim)：<code class="highlighter-rouge">rosed [package_name] [filename]</code>,例如<code class="highlighter-rouge">rosed roscpp Logger.msg</code></p>
  </li>
</ul>

<h2 id="ros节点">ros节点</h2>
<p>ros节点是整个机器人控制系统的一个功能单元，运行起来一个ros节点，即运行一个ros程序包中的一个可执行文件。例如<code class="highlighter-rouge">rosrun turtlesim turtle_teleop_key</code></p>

<blockquote>
  <p>ros系统在启动之前，首先需要运行<code class="highlighter-rouge">rosore</code></p>
</blockquote>

<h3 id="roslaunch">roslaunch</h3>
<p>使用<code class="highlighter-rouge">rosrun</code>每次只能启动一个节点，我们可以使用<code class="highlighter-rouge">roslaunch</code>来启动定义在$launch$文件中的多个节点。</p>

<p>用法：<code class="highlighter-rouge">roslaunch [package] [filename.launch]</code></p>

<p>launch文件语法解析，运行如下launch文件会启动两个节点</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;launch&gt;

  &lt;group ns="turtlesim1"&gt;
    &lt;node pkg="turtlesim" name="sim" type="turtlesim_node"/&gt;
  &lt;/group&gt;

  &lt;group ns="turtlesim2"&gt;
    &lt;node pkg="turtlesim" name="sim" type="turtlesim_node"/&gt;
  &lt;/group&gt;

  &lt;node pkg="turtlesim" name="mimic" type="mimic"&gt;
    &lt;remap from="input" to="turtlesim1/turtle1"/&gt;
    &lt;remap from="output" to="turtlesim2/turtle1"/&gt;
  &lt;/node&gt;

&lt;/launch&gt;
</code></pre></div></div>
<hr />

<h2 id="ros话题">ros话题</h2>
<p>ros话题是ros中不同节点之间的通信方式，一个节点在一个话题上发布消息，另一个节点订阅该话题以接收该消息。</p>

<h3 id="rostopic的使用">rostopic的使用</h3>
<p>我们通常使用rostopic来进行话题的相关操作</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rostopic -h
rostopic is a command-line tool for printing information about ROS Topics.

Commands:
    rostopic bw display bandwidth used by topic
    rostopic delay  display delay of topic from timestamp in header
    rostopic echo   print messages to screen
    rostopic find   find topics by type
    rostopic hz display publishing rate of topic    
    rostopic info   print information about active topic
    rostopic list   list active topics
    rostopic pub    publish data to topic
    rostopic type   print topic or field type

Type rostopic &lt;command&gt; -h for more detailed usage, e.g. 'rostopic echo -h'

</code></pre></div></div>
<hr />

<h2 id="ros消息">ros消息</h2>
<p>ros消息是ros中信息流动方式，一个节点发送某种类型的消息到一个话题，另一个节点订阅话题并接收相同类型的消息。依次他们完成通信。消息是有类型的，进行通信的两个节点必须发送与接收相同类型的消息。</p>

<h3 id="msg文件">msg文件</h3>
<p>$msg$文件就是一个描述$ROS$中所使用消息类型的简单文本。通常$msg$文件存放在$package$的$msg$目录下</p>

<h2 id="ros的服务">ros的服务</h2>
<p>ros中还存在服务，可以直接在终端中调用服务，允许当前终端向一个节点发送请求，并获得一个响应。使用<code class="highlighter-rouge">rosservice</code>可以轻松使用ros客户端、服务器框架提供的服务。</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosservice list         输出可用服务的信息
rosservice call         调用带参数的服务
rosservice <span class="nb">type         </span>输出服务类型
rosservice find         依据类型寻找服务find services by service <span class="nb">type
</span>rosservice uri          输出服务的ROSRPC uri
</code></pre></div></div>
<hr />

<h3 id="srv文件">srv文件</h3>
<p>一个$srv$文件描述一项服务。它包含两个部分：请求与响应。一般$srv$文件存放在$package$的$srv$目录下。</p>

<h2 id="ros中的参数">ros中的参数</h2>
<p>ros中还存在参数服务器，上面存储一些服务的参数设置，可以使用<code class="highlighter-rouge">rosparam</code>进行如下操作</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosparam <span class="nb">set            </span>设置参数
rosparam get            获取参数
rosparam load           从文件读取参数
rosparam dump           向文件中写入参数
rosparam delete         删除参数
rosparam list           列出参数名
</code></pre></div></div>
<hr />


    </div>
    
    <div class="post_wrapper">
      <footer class="post_footer cf">
        <div class="post_share">
          <span>Share:</span>
          <a href="https://twitter.com/intent/tweet?text=ros操作系统&url=http://localhost:4000/ros/" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/ros/" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
          <a href="https://plus.google.com/share?url=http://localhost:4000/ros/" title="Share on Google+" rel="nofollow" target="_blank"><i class="fa fa-google" aria-hidden="true"></i></a>
        </div>
        <div class="post_tag">
          <span>Tags:</span>
          
          <a href="/tags#tools" class="tag">tools</a>
          
        </div>
      </footer>
    </div>
  </article> <!-- End Section Post -->

  <section class="author cf">
    <div class="post_wrapper">
      <div class="author_image">
        <img src="/assets/img/wechat.jpg" alt="Author face">
      </div>
      <div class="author_info">
        <h2 class="author_title">line</h2>
        <p class="author_subtitle">怕什么真理无穷，进一寸有一寸的欢喜。</p>
        <div class="author_social">
          
          <span class="author_email"><i class="fa fa-envelope-o" aria-hidden="true"></i> <a href="mailto:2013211747@bupt.edu.cn">2013211747@bupt.edu.cn</a></span>
          
          
          
          <span class="author_phone"><i class="fa fa-phone" aria-hidden="true"></i> <a href="tel:1314-131-0370">1314-131-0370</a></span>
          

          
          <span class="author_website"><i class="fa fa-link" aria-hidden="true"></i> <a href="https://xhy3054.github.io/" target="_blank">https://xhy3054.github.io/</a></span>
                      
        </div>
      </div>
    </div>
  </section> <!-- End Section Author -->

  <section class="recent_box">
    <div class="post_wrapper">
      <h2 class="recent_title">Recent post</h2>
      <div class="recent_list">
        
          
            <a href="/ros/" class="recent_item" style="background-image: url( /assets/img/one-piece/one-piece4.jpg )"><span>ros操作系统</span></a>
          
        
          
            <a href="/slam-map/" class="recent_item" style="background-image: url( /assets/img/one-piece/one-piece3.jpg )"><span>视觉slam中的一种单目稠密建图方法</span></a>
          
        
          
            <a href="/loop-closing/" class="recent_item" style="background-image: url( /assets/img/one-piece/one-piece2.jpg )"><span>视觉slam中的回环检测概述</span></a>
          
        
          
            <a href="/bundle-adjustment-solve/" class="recent_item" style="background-image: url( /assets/img/one-piece/one-piece1.jpg )"><span>Bundle Adjustment等优化方法在视觉slam中的应用与求解</span></a>
          
        
          
            <a href="/state-estimation-filter/" class="recent_item" style="background-image: url( /assets/img/sword/sword14.jpg )"><span>状态估计之卡尔曼滤波</span></a>
          
        
          
            <a href="/state-estimation-nonlinear-least-square/" class="recent_item" style="background-image: url( /assets/img/sword/sword12.jpg )"><span>状态估计之非线性最小二乘</span></a>
          
        
      </div>
    </div>
  </section> <!-- End Section Recent Box -->
  
  
<section class="comment_area">
  <div class="comment_wrapper">
    
  </div>
</section> <!-- End Section Comment Area -->
  
</main> <!-- End Section Post Content -->


<footer class="main_footer">
  <div class="wrapper">
    
<ul class="social_footer">
  
  <li><a href="xhy3054" target="_blank"><i class="fa fa-google" aria-hidden="true"></i></a></li>
  
  
  <li><a href="#" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
  
  
  <li><a href="#" target="_blank"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
  
  
  <li><a href="#" target="_blank"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
  
  
  <li><a href="#" target="_blank"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
  
  
  <li><a href="#" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
  
</ul>
    <div class="copyright">
      <p>&copy; 2019. Design by line</p>
    </div>
  </div>
</footer> <!-- End Section Footer -->



  
<div class="top" title="Top"><i class="fa fa-chevron-up" aria-hidden="true"></i></div> <!-- End Top Scroll -->
  
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="/assets/js/jquery.vide.min.js"></script>
<script src="/assets/js/custom.js"></script>
<!-- End Javascript -->

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->
</body>
</html>
